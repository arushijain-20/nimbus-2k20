(this.webpackJsonpspa=this.webpackJsonpspa||[]).push([[0],{27:function(e,t,s){},28:function(e,t,s){},29:function(e,t,s){},31:function(e,t,s){},32:function(e,t,s){},38:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s(0),c=s.n(n),r=s(18),o=s.n(r),i=(s(27),s(28),s(8)),l=(s(29),c.a.createContext()),j=s(13),u=s.n(j),d=s(19),m=s(10),h=s(14),b=(s(31),"http://13.71.16.202:8000/");function O(){var e=Object(n.useContext)(l),t=e.setAuthToken,s=(e.authToken,e.setRefreshToken),c=e.setUser,r=Object(n.useState)({username:"",password:""}),o=Object(i.a)(r,2),j=o[0],O=o[1],f=function(e){e.target&&O(Object(h.a)(Object(h.a)({},j),{},Object(m.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(d.a)(u.a.mark((function e(a){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,fetch(b+"departments/auth/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,console.log(r),r.access&&(o={name:r.name,image:r.image},t(r.access),s(r.refresh),c(o),localStorage.setItem("authToken",r.access),localStorage.setItem("refreshToken",r.refresh),localStorage.setItem("user",JSON.stringify(o)),localStorage.setItem("expires",(new Date).getTime()+828e5)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("Error Getting Auth Token - Err : ",e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"main",children:[Object(a.jsx)("div",{className:"heading",children:Object(a.jsx)("h1",{children:"Nimbus"})}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("div",{className:"info info-2",children:"Nimbus Events"}),Object(a.jsx)("div",{className:"info",children:"Create Read Update Delete"}),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsxs)("div",{className:"heading",children:[Object(a.jsx)("h1",{children:"Admin"}),Object(a.jsx)("h3",{children:"NIMBUS Clubs and Event Managers"})]}),Object(a.jsxs)("form",{onSubmit:x,children:[Object(a.jsx)("div",{className:"form-row",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{required:!0,className:"form-control",type:"text",id:"username",name:"username",value:j.username,onChange:f,placeholder:"username",autoComplete:"off"})]})}),Object(a.jsx)("div",{className:"form-row",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{required:!0,className:"form-control",type:"password",id:"password",name:"password",value:j.password,onChange:f,placeholder:"********",autoComplete:"off"})]})}),Object(a.jsx)("div",{className:"form-row",children:Object(a.jsx)("button",{type:"submit",className:"btn-submit",children:"Login"})})]})]})]})})]})}s(32);function f(){var e=Object(n.useContext)(l).user;return Object(a.jsxs)("div",{className:"main dashboard",children:[Object(a.jsxs)("div",{className:"heading",children:[Object(a.jsx)("h1",{children:null===e||void 0===e?void 0:e.name}),Object(a.jsx)("img",{src:e.image,alt:"avatar",className:"avatar"})]}),Object(a.jsx)("div",{className:"container",children:"Hello"})]})}function x(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),s=t[0],c=t[1],r=Object(n.useState)(null),o=Object(i.a)(r,2),j=o[0],u=o[1],d=Object(n.useState)("Club"),m=Object(i.a)(d,2),h=m[0],b=m[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("authToken"),t=localStorage.getItem("refreshToken"),s=JSON.parse(localStorage.getItem("user")),a=localStorage.getItem("expires");e&&a>(new Date).getTime()&&(console.log("Got Local Auth Token"),c(e),u(t),b(s))}),[]),Object(a.jsx)(l.Provider,{value:{authToken:s,setAuthToken:c,refreshToken:j,setRefreshToken:u,user:h,setUser:b},children:s?Object(a.jsx)(f,{}):Object(a.jsx)(O,{})})}var g=s(20),p=s(2);var v=function(){return Object(a.jsxs)(g.a,{children:[Object(a.jsx)(p.a,{path:"/admin",exact:!0,component:x}),Object(a.jsx)(p.a,{path:"/events",exact:!0,children:Object(a.jsx)("div",{children:"Events Here"})})]})},N=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,39)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),c(e),r(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),N()}},[[38,1,2]]]);
//# sourceMappingURL=main.d40ce0cb.chunk.js.map